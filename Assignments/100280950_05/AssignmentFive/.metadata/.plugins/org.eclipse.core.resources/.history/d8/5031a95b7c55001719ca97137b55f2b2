/**
 * 
 * @author Joao Berardo
 * @cversion 1.0
 * @since June 13, 2017
 *
 */
public class Table {
	private final int MAX_BARS_HEIGTH = 20;
	
	private int[][] values;
	private int numRows;
	private int numCols;
	private boolean isHorizontal;
		
	public Table(int rows, int columns, boolean horizontal)
	{
		values = new int[rows][columns];
		this.numRows = rows;
		this.numCols = columns;
		this.isHorizontal = horizontal;
	}
	
	public void set(int i, int j, int n)
	{
		values[i][j] = n;
	}

	// returns the sum of the i'th row (horizontal true)
	// or column (horizontal false)
	public double sum(int i, boolean horizontal)
	{
		double total = 0;
		
		if (horizontal)
		{
			// sum of rows
			for (int row  = 0; row < values.length; row++)
			{
				total += this.values[i][row];
			}
		}
		else
		{
			// sum of columns
			for (int col = 0; col < values.length; col++)
			{
				total += this.values[col][i];
			}
		}
		return total;
	}
	
	/**
	 * 
	 * @return
	 */
	public boolean isHorizontal() {
		return isHorizontal;
	}

	/**
	 * 
	 * @param isHorizontal
	 */
	public void setHorizontal(boolean isHorizontal) {
		this.isHorizontal = isHorizontal;
	}
	
	/**
	 * 
	 */
	public void printResult()
	{
		double maxBarValue = this.getMaxBar();
		
		
		if (this.isHorizontal)
		{
			for (int row = 0; row < this.numRows; row++)
			{
				double rowSum = this.sum(row, true);
				
				System.out.print("[" + rowSum + "] ");
				
				rowSum = rowSum / maxBarValue * 20;
				
				for (int col = 0; col < rowSum; col++)
				{
					System.out.print("*");
				}
				System.out.println();
			}
		}
		else
		{
			double[] sumOfCols = new double[this.numCols];
			
			for (int col = 0; col < this.numCols; col++)
			{
				double colSum = this.sum(col, false);
				
				//System.out.print("[" + colSum + "] ");
				
				colSum = colSum / maxBarValue * 20;
				
				sumOfCols[col] = colSum;
			}
			
			for (int i = 0; i < MAX_BARS_HEIGTH; i++)
			{
				for (int j = 20; j > 0; j--)
				{
					
					if ((sumOfCols[j] - i) > 0)
					{
						System.out.print("*");
					}
				}

				System.out.println();
			}
		}
	}
	
	//
	private double getMaxBar()
	{
		double maxNum = 0;
		
		for (int i = 0; i < values.length; i++)
		{
			double rowSum = this.sum(i, true);
			
			if (rowSum > maxNum)
			{
				maxNum = rowSum;
			}
		}
		
		return maxNum;
	}
}
